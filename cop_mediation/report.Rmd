# Mediators of Vaccine Efficacy {#cop-mediators}

```{r cop-mediator-setup, echo = FALSE, message = FALSE, warning = FALSE}
library(here)
# so it builds in either directory
wd <- here()
root_dir <- gsub("/cop_mediation*", "", wd)
renv::activate(root_dir)
source(paste0(root_dir, "/_common.R"))
full_result <- readRDS(paste0(root_dir, "/cop_mediation/output/full_result.rds"))
full_result_cat <- readRDS(paste0(root_dir, "/cop_mediation/output/full_result_cat.rds"))
```

```{r, mediation-kable-quantitative, output = "asis"}
init_kable <- knitr::kable(full_result, 
            format = "latex", row.names = FALSE, booktabs = TRUE, escape = FALSE,
            caption = paste0("Table of mediation effect estimates for quantitative markers with 95\\% confidence intervals."),
            linesep = c(rep("", length(assays)-1), "\\hline"))
if(any(is.na(full_result))){
	init_kable <- kableExtra::add_footnote(init_kable, "Rows with NA denote insufficient overlap in distribution of assay between vaccinated and control participants.")
}
kableExtra::kable_styling(init_kable, latex_options = "hold_position")
```

```{r, mediation-kable-categorical, output = "asis"}
init_kable_cat <- knitr::kable(full_result_cat, 
            format = "latex", row.names = FALSE, booktabs = TRUE, escape = FALSE,
            caption = paste0("Table of mediation effect estimates for quantitative markers with 95\\% confidence intervals."),
            linesep = c(rep("", length(assays)-1), "\\hline"))
kableExtra::kable_styling(init_kable_cat, latex_options = "hold_position")
```
